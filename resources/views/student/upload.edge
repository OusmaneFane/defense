<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <!-- ===============================================-->
  <!--    Document Title-->
  <!-- ===============================================-->
  <title>Sup'Sout | Déposer un memoire</title>


  <!-- ===============================================-->
  <!--    Favicons-->
  <!-- ===============================================-->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicons/favicon.ico">
  <link rel="manifest" href="/assets/img/favicons/manifest.json">
  <meta name="msapplication-TileImage" content="/assets/img/favicons/mstile-150x150.png">
  <meta name="theme-color" content="#ffffff">


  <!-- ===============================================-->
  <!--    Stylesheets-->
  <!-- ===============================================-->
  <script src="/assets/js/config.navbar-vertical.js"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <link href="/assets/lib/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet">
  <link href="/assets/lib/prismjs/prism-okaidia.css" rel="stylesheet">
  <link href="/assets/lib/dropzone/dropzone.min.css" rel="stylesheet">
  <link href="/assets/css/theme.css" rel="stylesheet">
  <link href="/assets/lib/datatables-bs4/dataTables.bootstrap4.min.css" rel="stylesheet">
  <link href="/assets/lib/datatables.net-responsive-bs4/responsive.bootstrap4.css" rel="stylesheet">
  <link href="/assets/lib/fancybox/jquery.fancybox.min.css" rel="stylesheet">
  <!-- Dropzone CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.css" />

  <!-- Dropzone JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.js"></script>


</head>


<body>

  <!-- ===============================================-->
  <!--    Main Content-->
  <!-- ===============================================-->
  <main class="main" id="top">


    <div class="container" data-layout="container">
      <nav class="navbar navbar-vertical navbar-expand-xl navbar-light">
        <div class="d-flex align-items-center">
          <div class="toggle-icon-wrapper">

            <button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle" data-toggle="tooltip"
              data-placement="left" title="Toggle Navigation"><span class="navbar-toggle-icon"><span
                  class="toggle-line"></span></span></button>

          </div><a class="navbar-brand" href="index.html">
            <div class="d-flex align-items-center py-3"><img class="mr-2" src="/assets/img/illustrations/falcon.png"
                alt="" width="40" /><span class="text-sans-serif">Sup'Memoire</span>
            </div>
          </a>
        </div>
        <div class="collapse navbar-collapse" id="navbarVerticalCollapse">
          <div class="navbar-vertical-content perfect-scrollbar scrollbar">
            <ul class="navbar-nav flex-column" id="home">

              <li class="nav-item "><a class="nav-link" href="{{ route('student.dashboard') }}">
                  <div class="d-flex align-items-center"><span class="nav-link-icon"><span
                        class="fas fa-comments"></span></span><span class="nav-link-text"> Chats</span>
                  </div>
                </a></li>
              <li class="nav-item active"><a class="nav-link" href="{{ route('student.upload_file') }}">
                  <div class="d-flex align-items-center"><span class="nav-link-icon"><span
                        class="fas fa-book"></span></span><span class="nav-link-text"> Gestion des documents</span>
                  </div>
                </a></li>


            </ul>
            <div class="navbar-vertical-divider">
              <hr class="navbar-vertical-hr my-2" />
            </div>

            <div class="navbar-vertical-divider">
              <hr class="navbar-vertical-hr my-2" />
            </div>
            <ul class="navbar-nav flex-column">

              <li class="nav-item"><a class="nav-link" href="changelog.html">
                  <div class="d-flex align-items-center"><span class="nav-link-icon"><span
                        class="fas fa-code-branch"></span></span><span class="nav-link-text"> version</span><span
                      class="badge badge-pill ml-2 badge-soft-primary">v1.0</span>
                  </div>
                </a></li>
            </ul>
            <div class="settings px-3 px-xl-0">
              <div class="navbar-vertical-divider px-0">
                <hr class="navbar-vertical-hr my-3" />
              </div><a class="btn btn-sm btn-block btn-purchase mb-3" href="/logout">
                Se déconnecter</a>
            </div>
          </div>
        </div>
      </nav>
      <div class="content">
        <nav class="navbar navbar-light navbar-glass navbar-top sticky-kit navbar-expand">

          <button class="btn navbar-toggler-humburger-icon navbar-toggler mr-1 mr-sm-3" type="button"
            data-toggle="collapse" data-target="#navbarVerticalCollapse" aria-controls="navbarVerticalCollapse"
            aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span
                class="toggle-line"></span></span></button>
          <a class="navbar-brand mr-1 mr-sm-3" href="{{ route('student.dashboard') }}">
            <div class="d-flex align-items-center"><img class="mr-2" src="/assets/img/illustrations/falcon.png" alt=""
                width="40" /><span class="text-sans-serif">Sup'Memoire</span>
            </div>
          </a>
          <ul class="navbar-nav align-items-center d-none d-lg-block">
            <li class="nav-item">
              <div class="search-box">
                <form class="position-relative" data-toggle="search" data-display="static">

                  <input class="form-control search-input ml-6" type="search" placeholder="Rechercher..."
                    aria-label="Search" />
                  <span class="fas fa-search search-box-icon ml-6"></span>

                </form>

                <button class="close" type="button" data-dismiss="search"><span class="fas fa-times"></span></button>

              </div>
            </li>
          </ul>
          <ul class="navbar-nav navbar-nav-icons ml-auto flex-row align-items-center">
            <li class="nav-item d-none d-md-block">
              <a class="nav-link px-3 py-0" href="https://prium.github.io/falcon/v3.0.0-beta6/" target="_blank"><img
                  src="/assets/img/LOGO HORIZONTAL HD.png" alt="" height="35" /></a>
            </li>
            <li class="nav-item">
              <a class="nav-link settings-popover" href="#settings-modal" data-toggle="modal"><span
                  class="ripple"></span><span class="fa-spin position-absolute a-0 d-flex flex-center"><span
                    class="icon-spin position-absolute a-0 d-flex flex-center">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M19.7369 12.3941L19.1989 12.1065C18.4459 11.7041 18.0843 10.8487 18.0843 9.99495C18.0843 9.14118 18.4459 8.28582 19.1989 7.88336L19.7369 7.59581C19.9474 7.47484 20.0316 7.23291 19.9474 7.03131C19.4842 5.57973 18.6843 4.28943 17.6738 3.20075C17.5053 3.03946 17.2527 2.99914 17.0422 3.12011L16.393 3.46714C15.6883 3.84379 14.8377 3.74529 14.1476 3.3427C14.0988 3.31422 14.0496 3.28621 14.0002 3.25868C13.2568 2.84453 12.7055 2.10629 12.7055 1.25525V0.70081C12.7055 0.499202 12.5371 0.297594 12.2845 0.257272C10.7266 -0.105622 9.16879 -0.0653007 7.69516 0.257272C7.44254 0.297594 7.31623 0.499202 7.31623 0.70081V1.23474C7.31623 2.09575 6.74999 2.8362 5.99824 3.25599C5.95774 3.27861 5.91747 3.30159 5.87744 3.32493C5.15643 3.74527 4.26453 3.85902 3.53534 3.45302L2.93743 3.12011C2.72691 2.99914 2.47429 3.03946 2.30587 3.20075C1.29538 4.28943 0.495411 5.57973 0.0322686 7.03131C-0.051939 7.23291 0.0322686 7.47484 0.242788 7.59581L0.784376 7.8853C1.54166 8.29007 1.92694 9.13627 1.92694 9.99495C1.92694 10.8536 1.54166 11.6998 0.784375 12.1046L0.242788 12.3941C0.0322686 12.515 -0.051939 12.757 0.0322686 12.9586C0.495411 14.4102 1.29538 15.7005 2.30587 16.7891C2.47429 16.9504 2.72691 16.9907 2.93743 16.8698L3.58669 16.5227C4.29133 16.1461 5.14131 16.2457 5.8331 16.6455C5.88713 16.6767 5.94159 16.7074 5.99648 16.7375C6.75162 17.1511 7.31623 17.8941 7.31623 18.7552V19.2891C7.31623 19.4425 7.41373 19.5959 7.55309 19.696C7.64066 19.7589 7.74815 19.7843 7.85406 19.8046C9.35884 20.0925 10.8609 20.0456 12.2845 19.7729C12.5371 19.6923 12.7055 19.4907 12.7055 19.2891V18.7346C12.7055 17.8836 13.2568 17.1454 14.0002 16.7312C14.0496 16.7037 14.0988 16.6757 14.1476 16.6472C14.8377 16.2446 15.6883 16.1461 16.393 16.5227L17.0422 16.8698C17.2527 16.9907 17.5053 16.9504 17.6738 16.7891C18.7264 15.7005 19.4842 14.4102 19.9895 12.9586C20.0316 12.757 19.9474 12.515 19.7369 12.3941ZM10.0109 13.2005C8.1162 13.2005 6.64257 11.7893 6.64257 9.97478C6.64257 8.20063 8.1162 6.74905 10.0109 6.74905C11.8634 6.74905 13.3792 8.20063 13.3792 9.97478C13.3792 11.7893 11.8634 13.2005 10.0109 13.2005Z"
                        fill="#2A7BE4"></path>
                    </svg></span></span></a>

            </li>


            <li class="nav-item dropdown dropdown-on-hover"><a class="nav-link pr-0" id="navbarDropdownUser" href="#"
                role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <div class="avatar avatar-xl">
                  @each(memb in members)
                  @if(memb.id == student.id)
                  <img class="rounded-circle" src="data:image/jpeg;base64,{{ memb.photo }}" alt="" />
                  @endif
                  @endeach
                </div>
              </a>
              <div class="dropdown-menu dropdown-menu-right py-0" aria-labelledby="navbarDropdownUser">
                <div class="bg-white rounded-soft py-2">
                  <a class="dropdown-item font-weight-bold text-warning" href="#!"><span
                      class="fas fa-user mr-1"></span><span>{{ auth.user.name }}</span></a>

                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="{{ route('student.dashboard') }}">Chats</a>
                  <a class="dropdown-item" href="{{ route('student.upload_file') }}">Déposer un memoire</a>

                  <a class="dropdown-item" href="{{ route('user.profil', { id: student.id }) }}">Profil</a>

                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="/logout">Déconnexion</a>
                </div>
              </div>
            </li>
          </ul>
        </nav>
        <div class="card mb-3">
          <div class="bg-holder d-none d-lg-block bg-secondary text-white"
            style="background-image:url(../assets/img/illustrations/corner-4.png);">
          </div>
          <!--/.bg-holder-->

          <div class="card-body text-white">
            <div class="row">
              <div class="col-lg-8">
                <h3 class="mb-0">Gestion de document</h3>
                <p class="mt-2">DropzoneJS is an open-source library that provides drag & drop file uploads with image
                  previews.</p><a class="btn btn-link pl-0 btn-sm" href="https://www.dropzonejs.com/" target="_blank">
                  <span class="fas fa-chevron-right ml-1 fs--2"></span></a>
                <!-- Button trigger modal-->
                <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModal">Déposer un
                  memoire</button>
                <hr>
                <!-- Modal-->
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">List des memoires</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span
                            class="font-weight-light" aria-hidden="true">&times;</span></button>
                      </div>
                      <div class="modal-body">
                        <form action="{{ route('uploads.store') }}" method="POST" enctype="multipart/form-data">
                          <div class="card mb-3">
                            <div class="card-header">
                              <h5>Uploader votre mémoire</h5>
                              <p> Cliquez sur la zone en surbrillance ou glisser-déposer</p>
                              <pre class="mb-2"><code class="lang-html">{{ infoGroup.name }}</code></pre>
                            </div>
                            <div class="card-body bg-light">
                              <div class="row">
                                <div class="col-12">
                                  <div class="card">
                                    <div class="form-group">
                                      <input type="file" name="document" class="form-control-file">
                                    </div>
                                    <div class="card-footer d-flex justify-content-center bg-light text-center pt-4">
                                      <div class="col-10">
                                        <div class="form-row my-4">
                                          <div class="col-xl-12">
                                            <button class="btn btn-falcon-success btn-block mb-2 mb-xl-0" type="submit">
                                              <img src="../assets/img/logos/gmail.png" width="20" alt="" />
                                              <span class="font-weight-medium ml-2">Déposer</span>
                                            </button>
                                          </div>
                                        </div>

                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </form>

                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card mb-3">
          <div class="card-header">
            <div class="row align-items-center justify-content-between">
              <div class="col-4 col-sm-auto d-flex align-items-center pr-0">
                <h5 class="fs-0 mb-0 text-nowrap py-2 py-xl-0">Liste des memoires déposés</h5>
              </div>
              <div class="col-8 col-sm-auto text-right pl-2">
                <div class="d-none" id="customers-actions">
                  <div class="input-group input-group-sm">
                    <select class="custom-select cus" aria-label="Bulk actions">
                      <option selected="">Bulk actions</option>
                      <option value="Delete">Delete</option>
                      <option value="Archive">Archive</option>
                    </select>
                    <button class="btn btn-falcon-default btn-sm ml-2" type="button">Apply</button>
                  </div>
                </div>
                <div id="customer-table-actions">
                  <button class="btn btn-falcon-default btn-sm" type="button"><span class="fas fa-plus"
                      data-fa-transform="shrink-3 down-2"></span><span
                      class="d-none d-sm-inline-block ml-1">New</span></button>
                  <button class="btn btn-falcon-default btn-sm mx-2" type="button"><span class="fas fa-filter"
                      data-fa-transform="shrink-3 down-2"></span><span
                      class="d-none d-sm-inline-block ml-1">Filter</span></button>
                  <button class="btn btn-falcon-default btn-sm" type="button"><span class="fas fa-external-link-alt"
                      data-fa-transform="shrink-3 down-2"></span><span
                      class="d-none d-sm-inline-block ml-1">Export</span></button>
                </div>
              </div>
            </div>
          </div>
          <div class="card-body p-0">
            <div class="falcon-data-table">
              <table class="table table-sm mb-0 table-striped table-dashboard fs--1 data-table border-bottom border-200"
                data-options='{"searching":false,"responsive":false,"pageLength":12,"info":false,"lengthChange":false,"sWrapper":"falcon-data-table-wrapper","dom":"<&#39;row mx-1&#39;<&#39;col-sm-12 col-md-6&#39;l><&#39;col-sm-12 col-md-6&#39;f>><&#39;table-responsive&#39;tr><&#39;row no-gutters px-1 py-3 align-items-center justify-content-center&#39;<&#39;col-auto&#39;p>>","language":{"paginate":{"next":"<span class=\"fas fa-chevron-right\"></span>","previous":"<span class=\"fas fa-chevron-left\"></span>"}}}'>
                <thead class="bg-200 text-900">
                  <tr>
                    <th class="align-middle no-sort pr-3">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input checkbox-bulk-select" id="checkbox-bulk-customers-select"
                          type="checkbox" data-checkbox-body="#customers" data-checkbox-actions="#customers-actions"
                          data-checkbox-replaced-element="#customer-table-actions" />
                        <label class="custom-control-label" for="checkbox-bulk-customers-select"></label>
                      </div>
                    </th>
                    <th class="align-middle sort">Nom du document </th>
                    <th class="align-middle sort">Déposer par</th>
                    <th class="align-middle ">Dernier Commentaire de l'Encadrant</th>
                    <th class="align-middle sort">Action</th>

                  </tr>
                </thead>
                <tbody id="customers">
                  @each(doc in documents)
                  <tr class="btn-reveal-trigger">
                    <td class="py-2 align-middle white-space-nowrap">
                      <div class="custom-control custom-checkbox">
                        <input class="custom-control-input checkbox-bulk-select-target" type="checkbox"
                          id="customer-checkbox-0" />
                        <label class="custom-control-label" for="customer-checkbox-0"></label>
                      </div>
                    </td>
                    <td class="py-2 align-middle white-space-nowrap customer-name-column"><a
                        href="/uploads/{{ doc.file_name }}" data-fancybox>
                        <div class="media-body">
                          <h5 class="mb-0 fs--1">

                            <span class="fas fa-book"></span>
                            {{ doc.file_name }}
                        </div>
                      </a></td>

                    <td class="py-2 align-middle white-space-nowrap customer-name-column"><a
                        href="/uploads/{{ doc.file_name }}">
                        <div class="media d-flex align-items-center">

                          <div class="media-body">
                            <h5 class="mb-0 fs--1">
                              @each(user in users)
                              @if(user.id == doc.user_id)
                              {{ user.name }}
                              @endif
                              @endeach
                            </h5>
                          </div>
                      </a></td>

                    <td class="py-2 align-middle white-space-nowrap customer-name-column">
                      <button class="btn btn-link text-danger" type="button" data-toggle="modal"
                        data-target="#commentModal-{{ doc.id }}">
                        Voir le commentaire
                      </button>
                    </td>
                    <td class="py-2 align-middle white-space-nowrap">
                      <div class="dropdown text-sans-serif">
                        <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3" type="button"
                          id="customer-dropdown-{{ doc.id }}" data-toggle="dropdown" data-boundary="viewport"
                          aria-haspopup="true" aria-expanded="false">
                          <span class="fas fa-ellipsis-h fs--1"></span>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right border py-0"
                          aria-labelledby="customer-dropdown-{{ doc.id }}">
                          <div class="bg-white py-2">
                            <a class="dropdown-item" href="/uploads/{{ doc.file_name }}" data-fancybox>Visualiser</a>
                            <a class="dropdown-item text-danger" href="#!">Supprimer</a>
                            <a class="dropdown-item" href="/uploads/{{ doc.file_name }}" download>Télécharger</a>
                            <a class="dropdown-item" href="{{ route('student.view-comment', { id: doc.id }) }}">Voir le
                              commentaire</a>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <!-- Modal for Comment -->
                  <div class="modal fade" id="commentModal-{{ doc.id }}" tabindex="-1" role="dialog"
                    aria-labelledby="commentModalLabel-{{ doc.id }}" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="commentModalLabel-{{ doc.id }}">Commentaire pour {{
                            doc.file_name }}
                          </h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div id="commentContent-{{ doc.id }}">
                            @if(doc.comments && doc.comments.length > 0)
                            @each(comment in doc.comments)
                            <p>{{{ comment.content }}}</p>
                            @endeach
                            @else
                            <p>Aucun commentaire disponible.</p>
                            @endif
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  @endeach
                </tbody>
              </table>
            </div>
          </div>
        </div>


        <footer>
          <div class="row no-gutters justify-content-between fs--1 mt-4 mb-3">
            <div class="col-12 col-sm-auto text-center">
              <p class="mb-0 text-600">Tous droits reservés <span class="d-none d-sm-inline-block">|
                </span><br class="d-sm-none" /> 2024 &copy; <a href="https://supmanagement.ml">Sup'Management </a></p>
            </div>
            <div class="col-12 col-sm-auto text-center">
              <p class="mb-0 text-600">v1.0</p>
            </div>
          </div>
        </footer>
      </div>

    </div>
  </main>
  <!-- ===============================================-->
  <!--    End of Main Content-->
  <!-- ===============================================-->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const modals = document.querySelectorAll('.modal');
      modals.forEach(modal => {
        modal.addEventListener('shown.bs.modal', function (event) {
          const docId = event.target.id.split('-').pop();
          fetch(`/student/view-comment/${docId}`)
            .then(response => response.json())
            .then(data => {
              const contentDiv = document.getElementById(`commentContent-${docId}`);
              if (data.length === 0) {
                contentDiv.innerHTML = 'Aucun commentaire disponible.';
              } else {
                contentDiv.innerHTML = data.map(comment => `<p>${comment.content}</p>`).join('');
              }
            })
            .catch(error => console.error('Error fetching comments:', error));
        });
      });
    });
  </script>

  <!-- ===============================================-->
  <!--    JavaScripts-->
  <!-- ===============================================-->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/popper.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/lib/@fortawesome/all.min.js"></script>
  <script src="/assets/lib/stickyfilljs/stickyfill.min.js"></script>
  <script src="/assets/lib/sticky-kit/sticky-kit.min.js"></script>
  <script src="/assets/lib/is_js/is.min.js"></script>
  <script src="/assets/lib/lodash/lodash.min.js"></script>
  <script src="/assets/lib/perfect-scrollbar/perfect-scrollbar.js"></script>
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:100,200,300,400,500,600,700,800,900&amp;display=swap"
    rel="stylesheet">
  <script src="/assets/lib/prismjs/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.8.7/polyfill.min.js"></script>
  <script src="/assets/lib/dropzone/dropzone.min.js"></script>
  <script src="/assets/js/theme.js"></script>
  <script src="/assets/lib/datatables/js/jquery.dataTables.min.js"></script>
  <script src="/assets/lib/datatables-bs4/dataTables.bootstrap4.min.js"></script>
  <script src="/assets/lib/datatables.net-responsive/dataTables.responsive.js"></script>
  <script src="/assets/lib/datatables.net-responsive-bs4/responsive.bootstrap4.js"></script>
  <script src="/assets/lib/fancybox/jquery.fancybox.min.js"></script>

</body>

</html>